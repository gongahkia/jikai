(B) Expand TUI tests beyond import checks by adding interaction-level tests for generate, report/regenerate, provider selection, and history browse flows. +dx +tests +tui
(B) Add unit tests for topic normalization boundary cases (underscore/space/case mismatches) across prompting and validation services. +dx +tests +validation +prompt
(B) Add tests for vector initialization concurrency guard and fallback-to-keyword retrieval behavior under initialization failure. +dx +tests +vector +concurrency
(B) Add CI step that fails on mypy errors for touched files while keeping global non-strict mode as interim migration strategy. +dx +ci +types
(B) Add CI smoke test that boots API app, runs `/health`, and executes one mocked generation request to catch startup regressions. +dx +ci +api
(B) Add performance test script in `tests/perf` to benchmark end-to-end local generation latency for baseline and fast-mode paths. +stability +tests +latency
(B) Add Make target `make bench-latency` to run the performance script and output p50/p95 latency summary. +dx +make +latency
(B) Ensure `pyproject.toml` console script points to a true callable entrypoint (not `FastAPI` app object) by mapping `jikai` to `src.tui.__main__:main`. +stability +bugfix +packaging
(B) Add centralized exception mapping utility so provider-specific errors become consistent user-facing messages in both API and TUI. +stability +refactor +api +tui +providers
(B) Add optional in-memory response cache for identical generation requests within a short TTL in local mode to reduce repeated latency during study sessions. +latency +feature +cache
(B) Add safe cancellation handling in streaming generation to persist partial output snapshots with cancellation metadata for later resume or review. +stability +feature +tui +history
(B) Add explicit maximum corpus entry size checks during preprocessing to prevent oversized documents from degrading retrieval and generation latency. +stability +performance +corpus
(B) Add semantic search relevance threshold in `VectorService.semantic_search` and fallback to keyword retrieval when top similarity is below threshold. +stability +quality +vector
(B) Add a unified service facade module that both API and TUI call for generation/report/regeneration so business logic is not duplicated across interfaces. +philosophical +refactor +api +tui +services
(B) Add a startup self-check that validates required tort corpus file exists and fails fast with actionable error when missing. +stability +api +tui +startup
(B) Add provider health cache with short TTL to avoid repeated expensive health probes during interactive TUI sessions. +latency +tui +providers
(B) Add sqlite indexes on `generation_history(timestamp)`, `generation_reports(generation_id)`, and `generation_history(parent_generation_id)` for faster history and lineage queries. +stability +database +performance
